<h2>Reactice forms</h2>

<form [formGroup]="profileForm" (ngSubmit)="submit()">
    <label>
        Nome:
        <p><input type="text" formControlName="name" required></p>
        <p> {{ profileForm.value.name }}</p>
    </label>

    <hr />
    <h3>
        [formGroup] = profileForm
        <p>Value: {{ profileForm.value | json }}</p>
        <p>Valid: {{ profileForm.valid}}</p>
        <p>Dirty: {{ profileForm.dirty}}</p>
        <p>touched: {{ profileForm.touched}}</p>    
    </h3>
    <hr />

    <h3>
        [formControlName] = profileForm

        [formGroup] = profileForm
        <p>Value: {{ profileForm.get('name')?.value}}</p>
        <p>Valid: {{ profileForm.get('name')?.valid}}</p>
        <p>ERRORS: {{ profileForm.get('name')?.errors | json}}</p>
        <p>Dirty: {{ profileForm.get('name')?.dirty}}</p>
        <p>touched: {{ profileForm.get('name')?.touched}}</p>   
    </h3>
    <hr />

    <div formGroupName="myStacks">
        <label>
            Front:
            <input type="text" formControlName="front"/>
            <p>value {{ profileForm.value.myStacks?.front }}</p>
        </label>
        <label>
            banco:
            <input type="text" formControlName="banco">
            <p>value {{ profileForm.value.myStacks?.banco }}</p>
        </label>
    </div>

    <button type="button" (click)="update()">updateName</button>

    <hr>
    <label>
        New Food
        <input #newFood type="text">
    </label>

    <button 
    type="button" 
    (click)="addMyFavFood(newFood.value)"
    >add
    </button>

    <hr>
    <div formArrayName="myFavFoods">
        @for (food of profileForm.value.myFavFoods; track i; let i = $index){
            <label>
                {{ i }} - {{ food }}:
                <input type="text" [formControlName]="i">
            </label>
        <hr/>
        }
    </div>
    <hr>

    <button [disabled]="!profileForm.valid">Submit</button>

</form>